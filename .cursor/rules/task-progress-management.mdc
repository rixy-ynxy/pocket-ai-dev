---
description: 
globs: 
alwaysApply: false
---
# 作業完了時進捗管理ワークフロー

## 概要

開発作業が完了した際に自動的に実行される進捗管理ワークフローです。`reports/task-management.md`を更新し、プロジェクト進捗を正確に追跡します。

## 適用タイミング

以下の場合にこのルールを実行してください：

1. **機能実装完了時** - 新機能やコンポーネントの実装が完了した場合
2. **環境構築完了時** - 開発環境やインフラ設定が完了した場合  
3. **設定・統合完了時** - 外部サービス統合や設定作業が完了した場合
4. **フェーズ区切り時** - Phase内の主要な作業区切りが完了した場合
5. **ユーザーリクエスト時** - ユーザーが明示的に進捗更新を要求した場合

## ワークフロー手順

### 1. 作業内容の分析・整理

1. **実行した作業の詳細分析**
   - 今回の作業で実装・設定・構築した内容を具体的に把握
   - 使用した技術・ツール・ライブラリの特定
   - 関連ファイル・設定・ドキュメントの確認

2. **Phase・セクションの特定**
   - `reports/task-management.md`で該当するPhaseとセクションを特定
   - 今回の作業がどのチェックリスト項目に対応するかを判断
   - 必要に応じて新しいチェックリスト項目の追加を検討

3. **進捗状況の評価**
   - 完了した項目の特定（`[ ]` → `[x]`）
   - 部分完了項目の進捗度合い評価
   - 新たに発見された作業項目の追加

### 2. task-management.md の更新

1. **チェックリスト項目の更新**
   ```markdown
   # 変更前
   - [ ] 未完了の作業項目
   
   # 変更後  
   - [x] 完了した作業項目
   ```

2. **新規項目の追加**
   ```markdown
   # 実装した新機能・設定がチェックリストにない場合
   - [x] 新たに完了した作業項目
     - [x] 具体的な実装内容1
     - [x] 具体的な実装内容2
   ```

3. **進捗サマリーの更新**
   ```markdown
   # Phase進捗率の更新
   - **Phase N**: 🔄 進行中 (XX%) - 更新された進捗説明
   
   # 全体進捗の更新
   **全体進捗**: XX% (更新された全体状況)
   ```

4. **更新履歴への記録**
   ```markdown
   - YYYY/MM/DD: [作業内容の要約] - [主要な完了項目]
     - **[カテゴリ]**: [詳細な実装内容]
     - **[カテゴリ]**: [詳細な設定内容]  
     - **進捗**: [Phase進捗更新内容]
   ```

### 3. 更新内容の検証

1. **チェックリストの整合性確認**
   - 実際の作業内容とチェックリスト項目の一致確認
   - 進捗率計算の正確性確認
   - Phase間の依存関係・順序の確認

2. **ドキュメント品質の確認**
   - マークダウン記法の正確性
   - リンクや参照の有効性
   - 用語・表記の一貫性

## 更新パターン例

### パターン1: 新機能実装完了

```markdown
# Before
- [ ] Firebase統合設定
  - [ ] Firebase Client SDK設定
  - [ ] Firebase Admin SDK設定

# After  
- [x] Firebase統合設定
  - [x] Firebase Client SDK設定 (フロントエンド)
  - [x] Firebase Admin SDK設定 (バックエンド)
  - [x] 環境変数ファイル設定 (.env.local)
  - [x] NextAuth.js + Firebase認証統合
```

### パターン2: 新カテゴリ追加

```markdown
# 既存のセクションに新しいカテゴリを追加
- [x] 柔軟なポート管理システム構築
  - [x] プロジェクト専用ポート範囲設定 (4000-4099)
  - [x] 動的ポート設定スクリプト (dev-helper.sh)
  - [x] 複数プロジェクト対応ポート管理
  - [x] package.json開発スクリプト最適化
```

### パターン3: 進捗サマリー更新

```markdown
# Before
- **Phase 1**: 🔄 進行中 (5%) - ローカル開発環境構築中心

# After
- **Phase 1**: 🔄 進行中 (40%) - ローカル開発環境構築、Firebase統合、ポート管理システム完了
```

## 注意事項

1. **正確性の重視**
   - 実際に完了した作業のみをチェック済みにする
   - 進捗率は実際の完了項目に基づいて計算する
   - 楽観的すぎる進捗評価は避ける

2. **詳細度のバランス**
   - 重要な作業は詳細に記録する
   - 些細な作業は適切にグループ化する
   - 技術的詳細と管理的視点のバランスを保つ

3. **一貫性の維持**
   - 既存の記法・用語・形式に合わせる
   - Phase定義や進捗基準の一貫性を保つ
   - 更新履歴の形式を統一する

4. **将来性の考慮**
   - 今後の作業に役立つ情報を残す
   - 技術的決定の理由や背景を記録する
   - 課題や改善点も適切に記録する

## 実行確認

このワークフローの実行後は以下を確認してください：

- [ ] 該当するPhaseのチェックリスト項目が正確に更新されている
- [ ] 新規追加項目が適切なセクションに配置されている  
- [ ] 進捗サマリーの数値が現実的で一貫している
- [ ] 更新履歴に今回の作業が適切に記録されている
- [ ] マークダウン記法やリンクが正常に動作する
- [ ] 全体的なドキュメント構造が保持されている

このルールにより、プロジェクト進捗の透明性と追跡可能性が向上し、チーム全体での状況共有が効率化されます。
